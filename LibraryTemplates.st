{1,
{8,
{"АУФ",1,0,"",""},
{8,
{"Кодогенератор для API",1,0,"",""},
{0,
{"Движения.Списание.МодульДокумента",0,0,"[Движения]Документ","// Формирование движений по регистру <?""ИмяРН"", РегистрНакопления>
//
// Параметры
//  
//  пДокОбъект  - Документ.Объект - Документ по которому формируются движения
//  пРежимПроведения  - РежимПроведенияДокумента - стандартное перечисление (Оперативный,Неоперативный)
//  пОтказ  - Булево - Используется для фиксация факта ошибки при формировании движений
//                 Если истина, то стандартный обработчик выбросит исключение и не проведёт документ
//
Процедура Движения_<?""ИмяРН"", РегистрНакопления>(пДокОбъект, пРежимПроведения, пОтказ)
	
	ТабСписания = пДокОбъект.<?""Имя табличной части"">.Выгрузить();
	МетаРег = Метаданные.РегистрыНакопления.<?""ИмяРН"", РегистрНакопления>;
	
	ДвижениеПоРегистрам_ауф.СписаниеОстатковРН(пДокОбъект, МетаРег, ТабСписания, пРежимПроведения, пОтказ);
	
КонецПроцедуры


"}
},
{0,
{"Движения.Списание.МодульДокумента.ПримерИспользования",0,0,"[Движения]Документ","Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	Движения_<?""ИмяРН"", РегистрНакопления>(ЭтотОбъект, РежимПроведения, Отказ);
	
КонецПроцедуры


// Формирование движений по регистру <?""ИмяРН"", РегистрНакопления>
//
// Параметры
//  
//  пДокОбъект  - Документ.Объект - Документ по которому формируются движения
//  пРежимПроведения  - РежимПроведенияДокумента - стандартное перечисление (Оперативный,Неоперативный)
//  пОтказ  - Булево - Используется для фиксация факта ошибки при формировании движений
//                 Если истина, то стандартный обработчик выбросит исключение и не проведёт документ
//
Процедура Движения_<?""ИмяРН"", РегистрНакопления>(пДокОбъект, пРежимПроведения, пОтказ)
	
	ТабСписания = пДокОбъект.<?""Имя табличной части"">.Выгрузить();
	МетаРег = Метаданные.РегистрыНакопления.<?""ИмяРН"", РегистрНакопления>;
	
	ДвижениеПоРегистрам_ауф.СписаниеОстатковРН(пДокОбъект, МетаРег, ТабСписания, пРежимПроведения, пОтказ);
	
КонецПроцедуры


"}
},
{0,
{"Модуль менеджера регистра накопления",0,0,"[Модуль]РНМенеджер","#Область АУФ_ВнешнийИнтерфейс

///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////// АУФ.ВНЕШНИЙ ИНТЕРФЕЙС /////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///// Код в этом разделе не рекомендуется модифицировать
///////////////////////////////////////////////////////////////////////////////////////////////

#Область АУФ_ВнешнийИнтерфейсСлужебный

Функция ВерсияИнтерфейсаАУФ() Экспорт
	
	// Необходимо для обеспечения обратной совместимости в случае изменения интерфейсов более высокого уровня
	// Менять только при условии четкого понимания, что делается
	// Пример правильной модификации:
	// Задача: Запрос остатков регистра должен собирать много информации, не хранимой в этом регистре
	// 1. Заремариваете текущую версию.
	// 1.1. В ходе разработки и тестирования пишете любые версии при условии, что они меньше единицы
	// 2. используя шаблон заполняете модуль менеджера регистра
	// 3. Переопределяете запрос в функциях ЗапросОстатковПереопределяемый() и ТекстЗапросаОстатковПереопределяемый()
	// 4. Тестируете и даже используете в каких-то доработках
	// 5. После того, как возникает потребность использовать подсистему ""Движения по регистрам"" или иные:
	// 5.1 Возвращаем заремаренную версию
	// 5.2 Проверяем все переопределяемые функции на предмет корректного заполнения (особенно ПоляПоискаОстатковПереопределяемый())
	
	// История версий интерфейсов
	// 0.X - тестовые версии. Можно использовать в продакшене для отключения специфичных возможностей АУФ при использовании данного шаблона
	// 1.0х - Поддержка запросов остатков, в том числе через прокси-запросы, подбор остатков в автоматическом режиме
	// 1.1х - Поддержка отрицательных остатков при движении.
	// 1.2х - Совместимость с подсистемой заменяемого кода в случае подмены модуля менеджера.
	// 1.3х - Оптимизированы алгоритмы движений списания и изменены сигнатуры задействованных методов (подбор остатков, поля поиска). Метод API ПодобратьОстатки исключен как устаревший
	
	Возврат 1.300;
	
КонецФункции

Функция РазрешеныОтрицательныеОстатки() Экспорт
	
	Возврат РазрешеныОтрицательныеОстаткиПереопределяемый();
	
КонецФункции

Функция ЭтоРегистрОстатков() Экспорт
	
	Возврат ЭтоРегистрОстатковПереопределяемый();
	
КонецФункции


#КонецОбласти

// Получение остатков на переданную дату
// Имена ресурсов соответствуют имени заданному в конфигураторе
//
// Параметры
//  
//  пДата  - Дата,МоментВремени,Граница - Дата на которую запрашиваются остатки
//  пПараметрыАУФ	- Структура - АУФ-совместимые параметры запроса (см. обработку КонструкторПараметровЗапроса_ауф)
//                 Если не задан, то отбираются все элементы и все поля без явной сортировки и прочих настроек
//
// Возвращаемое значение:
//   РезультатЗапроса   - Остатки по регистру
//
Функция ЗапросОстатков(пДата = Неопределено, пПараметрыАУФ = Неопределено) Экспорт
	
	РезультатЗапроса = ЗапросОстатковПереопределяемый(пДата, пПараметрыАУФ);
	
	Возврат РезультатЗапроса;
	
КонецФункции

// Получение остатков на переданную дату
// Имена ресурсов соответствуют имени заданному в конфигураторе
//
// Параметры
//  
//  пДата  - Дата,МоментВремени,Граница - Дата на которую запрашиваются остатки
//  пПараметрыАУФ	- Структура - АУФ-совместимые параметры запроса (см. обработку КонструкторПараметровЗапроса_ауф)
//                 Если не задан, то отбираются все элементы и все поля без явной сортировки и прочих настроек
//
// Возвращаемое значение:
//   РезультатЗапроса   - Остатки по регистру
//
Функция ОстаткиНаДату(пДата, пПараметрыАУФ = Неопределено) Экспорт
	
	РезультатЗапроса = ЗапросОстатковПереопределяемый(пДата, пПараметрыАУФ);
	
	Возврат РезультатЗапроса;
	
КонецФункции

// Получение актуальных остатков
// Имена ресурсов соответствуют имени заданному в конфигураторе
//
// Параметры
//  
//  пОтбор			- Структура,Соответствие - Ключ имя реквизита, значение - значение отбора.
//                 Если не задан, то отбираются все элементы
//  пПараметрыАУФ	- Структура - АУФ-совместимые параметры запроса (см. обработку КонструкторПараметровЗапроса_ауф)
//                 Если не задан, то отбираются все элементы и все поля без явной сортировки и прочих настроек
//
// Возвращаемое значение:
//   РезультатЗапроса   - Остатки по регистру
//
Функция ОстаткиАктуальные(пПараметрыАУФ = Неопределено) Экспорт
	
	РезультатЗапроса = ЗапросОстатковПереопределяемый(Неопределено, пПараметрыАУФ);
	
	Возврат РезультатЗапроса;
	
КонецФункции

// Формирование таблицы движений для списания
//
// Параметры
//  
//  пТабСписания  - ТаблицаЗначений - таблица содержащая записи которые необходимо списать (потребности)
//                 Структура таблицы должна соответствовать структуре регистра
//                 и структуре таблицы остатков минимально как подмножество
//  пОтказ  - Булево - Изменяемый параметр. Если истина, то движения сформировать не удалось
//
// Возвращаемое значение:
//   ТаблицаЗначений   - Результат подбора остатков - таблица движений с набором колонок из таблицы остатков.
//
Функция ДвиженияСписание(пДокОбъект, пТабСписания, пОтказ) Экспорт
	
	ТабДвижений = ДвиженияСписаниеПереопределяемый(пДокОбъект, пТабСписания, пОтказ);
	
	Возврат ТабДвижений;
	
КонецФункции

// Формирование таблицы движений для списания
//
// Параметры
//  
//  пТабПоступления  - ТаблицаЗначений - таблица содержащая записи которые необходимо оприходовать
//                 Структура таблицы должна соответствовать структуре регистра
//  ТабОстатков  - ТаблицаЗначений - таблица остатков по регистру
//                 Структура таблицы должна соответствовать и структуре регистра как минимум как подмножество
//                 и структуре таблицы списания как надмножество
//  пОтказ  - Булево - Изменяемый параметр. Если истина, то движения сформировать не удалось
//
// Возвращаемое значение:
//   ТаблицаЗначений   - таблица движений поступления.
//
Функция ДвиженияПоступление(пДокОбъект, пТабПоступления, пОтказ) Экспорт
	
	Возврат ДвиженияПоступлениеПереопределяемый(пДокОбъект, пТабПоступления, пОтказ);
	
КонецФункции

// Формирование АУФ-совместимого отбора по переданной таблице
// Для каждого регистра состав полей настраивается индивидуально
//
// Параметры
//  
//  пДанныеШапки  - Произвольный - Реквизиты шапки документа или иной источник для отбора по измерениям
//  пТаблица  - ТаблицаЗначений - Таблица служащая источником значений для формирования фильтра
//  пДопРеквизиты  - Строка,Массив,Структура,Соответствие - Дополнительные данные отбора не являющиеся измерениями регистра
//                 Для коллекций типа Структура и Соответствие предполагается хранение имени реквизита в ключе
//                 
// Возвращаемое значение:
//   Структура   - Структура(Отбор,УсловияОтбора)
//
Функция ФильтрПоИзмерениям(пДанныеШапки = Неопределено, пТаблица = Неопределено, пДопРеквизиты = Неопределено) Экспорт
	
	Результат = ФильтрПоИзмерениямПереопределяемый(пДанныеШапки, пТаблица, пДопРеквизиты);
	
	Возврат Результат;

КонецФункции

#КонецОбласти


#Область АУФ_ПереопределяемыйИнтерфейс
///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////// АУФ.ПЕРЕОПРЕДЕЛЯЕМЫЙ ИНТЕРФЕЙС /////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////
///// Код в этом разделе может быть быть переопределен, но т.к. он является частью API
///// то форматы входных и выходных данных не должны меняться
///////////////////////////////////////////////////////////////////////////////////////////////

Функция РазрешеныОтрицательныеОстаткиПереопределяемый()
	
	Возврат <?""Разрешить списание в минус?"", ВыборВарианта, ""Да"", ""Истина"", ""Нет"", ""Ложь"">;
	
КонецФункции

Функция ЭтоРегистрОстатковПереопределяемый()
	
	Возврат <?""Это регистр остатков или оборотов?"", ВыборВарианта, ""Остатки"", ""Истина"", ""Обороты"", ""Ложь"">;
	
КонецФункции

Функция ФильтрПоИзмерениямПереопределяемый(пДанныеШапки, пТаблица, пДопРеквизиты)
	
	Перем Фильтр;
	АУФ = ОбщегоНазначения_ауф;
	
	Фильтр = АУФ.ФильтрПоРеквизитамОбъектаБД(МетаданныеОбъекта(), пДанныеШапки, ""Измерения"", Фильтр);
	Фильтр = АУФ.ФильтрПоРеквизитамОбъектаБД(МетаданныеОбъекта(), пТаблица, ""Измерения"", Фильтр);
	
	Фильтр = АУФ.ФильтрПоРеквизитамОбъекта(пДопРеквизиты, пДанныеШапки, Фильтр);
	Фильтр = АУФ.ФильтрПоРеквизитамОбъекта(пДопРеквизиты, пТаблица, Фильтр);
	
	Возврат Фильтр;

КонецФункции

Функция ДвиженияСписаниеПереопределяемый(пДокОбъект, пТабСписания, пОтказ)
	
	ЭтоРегистрОстатков = ЭтоРегистрОстатков();

	Если ЭтоРегистрОстатков Тогда
		ТабДвижений = ПодборОстатковПереопределяемый(пДокОбъект, пТабСписания, пОтказ);
	Иначе
		ТабДвижений = пТабСписания;
	КонецЕсли;
	
	Возврат ТабДвижений;

КонецФункции

Функция ДвиженияПоступлениеПереопределяемый(пДокОбъект, пТабПоступления, пОтказ)
	
	Возврат пТабПоступления;

КонецФункции

Функция ПодборОстатковПереопределяемый(пДокОбъект, пТабСписания, пОтказ = Ложь)
	
	ТабОстатков = ОстаткиДляСписания(пДокОбъект, пТабСписания);
	ПоляПоиска = ПоляПоискаОстатковПереопределяемый(пТабСписания, ТабОстатков); 
	
	РазрешеныОтрицательныеОстатки = РазрешеныОтрицательныеОстатки();
	ВсеРесурсы = ОбщегоНазначения_ауф.ИменаРеквизитовОбъектаБД(МетаданныеОбъекта(), ""Ресурсы"");
	ОсновнойРесурс = ВсеРесурсы[0];	
	
	МастерПодбора = МастерскаяАПИ_ауф.МастерПодбораРесурсов(МетаданныеОбъекта());
	МастерПодбора.ДобавитьВсеРесурсыПоИсточнику(пТабСписания, ТабОстатков, ОсновнойРесурс);
	МастерПодбора.ИспользоватьИсключения(Не РазрешеныОтрицательныеОстатки); 
	МастерПодбора.ИспользоватьСообщения(РазрешеныОтрицательныеОстатки);
	
	Если Не РазрешеныОтрицательныеОстатки Тогда
		ТабДвижений = МастерПодбора.ПодобратьОстатки(пТабСписания, ТабОстатков, ПоляПоиска, пОтказ);
	Иначе
		МастерПодбора.ПодобратьОстатки(пТабСписания, ТабОстатков, ПоляПоиска); // просто для вывода сообщений
		ТабДвижений = пТабСписания.Скопировать();
	КонецЕсли;

	Возврат ТабДвижений;
	
КонецФункции

Функция ПоляПоискаОстатковПереопределяемый(пТабСписания, пТабОстатков)
	
	// По умолчанию поля поиска это измерения регистра присутствующие в переданной таблице для списания и в таблице остатков
	
	Фильтр1 = ФильтрПоИзмерениям(,пТабСписания);
	Фильтр2 = ФильтрПоИзмерениям(,пТабОстатков);
	
	Поля1 = ОбщегоНазначения_ауф.ПреобразоватьВМассив(Фильтр1.Отбор, Ложь);
	Поля2 = ОбщегоНазначения_ауф.ПреобразоватьВМассив(Фильтр2.Отбор, Ложь);
	ВсеПоля =  Поля1;
	ОбщегоНазначения_ауф.ДополнитьМассив(ВсеПоля, Поля2, Истина);
	
	ПоляПоиска = ОбщегоНазначения_ауф.МассивВСтрокуСРазделителями(ВсеПоля);
	
	Возврат ПоляПоиска;

КонецФункции

// Получение остатков
// Имена ресурсов соответствуют имени заданному в конфигураторе
//
// Параметры
//  
//  пДата  - Дата,МоментВремени,Граница - Дата на которую запрашиваются остатки
//                 Если не задано, то остатки формируются на последние рассчитанные итоги
//  пПараметрыАУФ	- Структура - АУФ-совместимые параметры запроса (см. обработку КонструкторПараметровЗапроса_ауф)
//                 Если не задан, то отбираются все элементы и все поля без явной сортировки и прочих настроек
//
// Возвращаемое значение:
//   ТаблицаЗначений   - Остатки по регистру
//
Функция ЗапросОстатковПереопределяемый(пДата, пПараметры)
	
	Перем Отбор, УсловияОтбора, Поля; 
	
	МетаРег = МетаданныеОбъекта();
	
	РезультатЗапроса = Запросы_ауф.ОстаткиРН(МетаРег, пДата, пПараметры);
	
	Если Ложь Тогда //Пример переопределения функции	
		ТекстЗапроса = ТекстЗапросаОстатковПереопределяемый();
		Если пДата = Неопределено Тогда
			ТекстЗапроса = СтрЗаменить(ТекстЗапроса, ""&ДатаОстатков"", """");
		КонецЕсли;
		// Отказ от универсального запроса остатков подразумевает создание сложного запроса
		// Поэтому автозаполнение отключается
		// При разработке запроса не забываем настраивать опции построителя: поля и условия, в т.ч. условия виртуальных таблиц
		Автозаполнение = Ложь; 
		Запрос = Запросы_ауф.НовыйЗапрос(ТекстЗапроса, пПараметры, Автозаполнение);
		МВТ = Новый МенеджерВременныхТаблиц;
		Запрос.УстановитьПараметр(""ДатаОстатков"", пДата);
		Запрос.МенеджерВременныхТаблиц = МВТ;
		
		РезультатЗапроса = Запрос.Выполнить();
		МВТ.Закрыть();
	КонецЕсли;
	
	Возврат РезультатЗапроса;

КонецФункции

Функция ТекстЗапросаОстатковПереопределяемый()
	
	// При разработке запроса не забываем настраивать параметры построителя:
	// поля и условия, в т.ч. условия виртуальных таблиц
	// Для даты остатков используйте параметр &ДатаОстатков	
	
	
КонецФункции

Функция ОстаткиДляСписания(пДокОбъект, пТабСписания)
	
	Фильтр = ФильтрПоИзмерениям(пДокОбъект, пТабСписания);
	ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
	ПараметрыЗапроса.ДополнитьИзДругихПараметров(Фильтр);
	ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
	
	Период = Новый Граница(пДокОбъект.МоментВремени(), ВидГраницы.Исключая);
	РезультатЗапроса = ОстаткиНаДату(Период, ПараметрыЗапросаАУФ);
	ТабОстатков = РезультатЗапроса.Выгрузить();
	
	Возврат ТабОстатков;

КонецФункции


// Реализация недостающего метода контекста, аналогичного контексту объекта или ссылки
//
// Параметры
//  нет передаваемых параметров
//
Функция МетаданныеОбъекта()
	
	Возврат Метаданные.РегистрыНакопления.<?""Выберите регистр"", РегистрНакопления>; //ИзШаблона ""Выберите регистр""
	
КонецФункции

#КонецОбласти
"}
},
{0,
{"Модуль менеджера справочника",0,0,"[Модуль]СпрМенеджер","#Область АУФ_ВнешнийИнтерфейс

#Область АУФ_ВнешнийИнтерфейсСлужебный

Функция ВерсияОбъекта() Экспорт
	
	Возврат ""0.001"";
	
КонецФункции

Функция ИдентификаторОбъекта() Экспорт
	
	Возврат МетаданныеОбъекта().ПолноеИмя();
	
КонецФункции

Функция ВерсияИнтерфейсаАУФ() Экспорт
	
	// Необходимо для обеспечения обратной совместимости в случае изменения интерфейсов более высокого уровня
	// Менять только при условии четкого понимания, что делается
	// Пример правильной модификации:
	// Задача: Запрос данных таблицы должен собирать информацию, не хранимой в этом объекте (например, остатки для справочника номенклатуры)
	// 1. Заремариваете текущую версию.
	// 1.1. В ходе разработки и тестирования пишете любые версии при условии, что они меньше единицы
	// 2. используя шаблон заполняете модуль менеджера
	// 3. Переопределяете запрос в функциях ЗапросДанныхПереопределяемый() и ТекстЗапросаПереопределяемый()
	// 4. Тестируете и даже используете в каких-то доработках
	// 5. После того, как появляется потребность включить переопределение в систему прокси-запросов:
	// 5.1 Возвращаем заремаренную версию
	
	// История версий интерфейсов
	// 0.X - тестовые версии. Можно использовать в продуктиве для отключения специфичных возможностей при использовании данного шаблона
	// 1.0х - Поддержка запросов, в том числе через прокси-запросы
	// 1.1х - Совместимость с подсистемой заменяемого кода в случае подмены модуля менеджера
	
	Возврат 1.1;
	
КонецФункции

#КонецОбласти


Функция ЗапросДанных(пПараметрыАУФ = Неопределено) Экспорт
	
	Возврат ЗапросДанныхПереопределяемый(пПараметрыАУФ);
	
КонецФункции

#КонецОбласти


#Область АУФ_ПереопределяемыйИнтерфейс

Функция ЗапросДанныхПереопределяемый(пПараметрыАУФ = Неопределено) Экспорт
	
	// Структура модуля организована для демонстрации возможностей переопределения
	// Лишнее всегда можно удалить, если компилирующийся, но не выполняющийся код задевает тонкие душевные струны
	// Можно переопределить только параметры, например добавить всегда проверяемое условие или обязательное поле в результате запроса
	// Можно переопределить и сам запрос, но в этом случае придется взять на поддержку сопровождение текста запроса
	
	ПереопределитьПараметры = Ложь;
	ПереопределитьТекстЗапроса = Ложь;
	
	Если Не ПереопределитьПараметры Тогда
		ПараметрыЗапросаАУФ = пПараметрыАУФ;
	Иначе // ниже примерный шаблон для переопределения
		ПереопределятьЯвноНазначенныеПараметры = Ложь;
		ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
		Если ЗначениеЗаполнено(пПараметрыАУФ) Тогда
			ПараметрыЗапроса.ДополнитьИзДругихПараметров(пПараметрыАУФ, ПереопределятьЯвноНазначенныеПараметры);
		КонецЕсли;
		ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
	КонецЕсли;
	
	Если Не ПереопределитьТекстЗапроса Тогда
		РезультатЗапроса = Запросы_ауф.ЗапросДанных(""Справочники"", МетаданныеОбъекта().Имя, ПараметрыЗапросаАУФ);
	Иначе
		ТекстЗапроса = ТекстЗапросаПереопределяемый();
		Запрос = Запросы_ауф.НовыйЗапрос(ТекстЗапроса, ПараметрыЗапросаАУФ, Ложь);
		РезультатЗапроса = Запрос.Выполнить();
	КонецЕсли;
	
	Возврат РезультатЗапроса;
	
КонецФункции

Функция ТекстЗапросаПереопределяемый()
	
	Возврат
	""ВЫБРАТЬ Null Как Ссылка
	|	ИЗ Справочник.<?""Выберите справочник"", Справочник>
	|ГДЕ
	|	ЛОЖЬ""
	;
	
КонецФункции

// Реализация недостающего метода контекста, аналогичного контексту объекта или ссылки
//
// Параметры
//  нет передаваемых параметров
//
Функция МетаданныеОбъекта()
	
	Возврат Метаданные.Справочники.<?""Выберите справочник"", Справочник>; //ИзШаблона ""Выберите справочник""
	
КонецФункции


#КонецОбласти"}
},
{0,
{"Отчет.Модуль объекта (Прокси-запрос)",0,0,"Отчет[Модуль]","
#Область ПрограммныйИнтерфейс

// Получение результата выполнения запроса с учетом переданных параметров
//
// Параметры
//  
//  пОтбор			- Структура,Соответствие - Ключ имя реквизита, значение - значение отбора.
//                 Если не задан, то отбираются все элементы
//                 если по логике запроса предусмотрено использование отбора по периоду, то необходимо указать его
//                 Дата1 и Дата2 для периодов и Дата2 для срезов на указанную дату.
//  пУсловияОтбора  - Структура - Ключ - имя реквизита, значение - способ сравнения (тип - ВидСравнения). 
//                 Если не задан, то все условия отбираются по виду сравнения ""Равно""
//  пКонтейнер		- Строка - описание типа возвращаемого значения. Допустимые значения ""РезультатЗапроса"" и ""ТаблицаЗначений"".
//
// Возвращаемое значение:
//   РезультатЗапроса,ТаблицаЗначений - результат выполнения запроса
//
Функция РезультатОтчета(пОтбор = Неопределено, пУсловияОтбора = Неопределено, пКонтейнер = ""РезультатЗапроса"") Экспорт
	
	Настройки = НастройкиЗапроса(пОтбор, пУсловияОтбора);
	
	ШифрМодуля = Метаданные.ОбщиеМодули.ОбщиеЗапросы_ауф.ПолноеИмя();
	МенеджерОбщихЗапросов = ЗаменяемыйКод_ауф.ОбъектНаВыполнение(ШифрМодуля, ОбщиеЗапросы_ауф); 
	
	Результат = МенеджерОбщихЗапросов.Сформировать(Настройки, пКонтейнер);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти


#Область СлужебныеПроцедурыИФункции	

// Формирование параметров для последующей передачи в компоновщик
//
// Параметры
//  
//  пОтбор			- Структура,Соответствие - Ключ имя реквизита, значение - значение отбора.
//                 Если не задан, то отбираются все элементы
//  пУсловияОтбора  - Структура - Ключ - имя реквизита, значение - способ сравнения (тип - ВидСравнения). 
//                 Если не задан, то все условия отбираются по виду сравнения ""Равно""
//
// Возвращаемое значение:
//   Структура - Содержит список полей в свойстве ""Поля"" и отбор с условиями отбора в соответствующих свойствах
//
Функция НастройкиЗапроса(пОтбор = Неопределено, пУсловияОтбора = Неопределено)

	Результат = Новый Структура;
	Результат.Вставить(""ИмяЗапроса"", 111ИДЕНТИФИКАТОР_ЗАПРОСА_ПО_КОТОРОМУ_ЕГО_МОЖНО_ОТЛИЧИТЬ_ОТ_ДРУГИХ_1111); // Будет использоваться для определения того какой прокси-запрос использовать
	Результат.Вставить(""Поля"", Новый Структура); // поля которые должны быть в итоговой выборке
	Результат.Вставить(""Параметры"", Новый Структура); //Фиксированные параметры. Оставлено для совместимости. Установка перенесена в общий модуль
	Результат.Вставить(""Отбор"", Новый Структура); // отбор, где ключ имя поля, а значение это значение отбора
	Результат.Вставить(""УсловияОтбора"", Новый Структура); // для описания отборов сложнее чем ВидСравнения.Равно
	
	//Результат.Поля.Вставить(""ИмяПоляКотороеНужноПолучитьВИтоговойВыборке"");
	
	
	Фильтры = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
	#Область DevOnlyПолучениеКонтекста
	#Если Сервер и Не Сервер Тогда
		
		Фильтры = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
		
	#КонецЕсли
	#КонецОбласти
	
	//Пример отбора
	//Фильтры.Добавить(""Номенклатура"", ""ВСписке"", ""СписокНоменклатуры""); 
	//Фильтры.Добавить(""СтраховойПродукт"",		 ""НеРавно"", Справочники.СтраховыеПродукты.НайтиПоКоду(""00000000000000000015""));
	//Фильтры.Добавить(""ПремияСуммаОборот"",		 ""НеРавно"", 0);
	//ЗаполнитьЗначенияСвойств(Результат, Фильтры.ПолучитьАУФ());
		
	Возврат Результат;
	
КонецФункции


#КонецОбласти"}
},
{0,
{"Отчет.Модуль формы",0,0,"Отчет[Форма]","#Область ОбработчикиСобытийЭлементовФормы	

Процедура КаталогСохраненияНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	ДиалогОткрытияФайла = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	ДиалогОткрытияФайла.Заголовок = ""Выберите каталог для сохранения файлов отчета"";
	ДиалогОткрытияФайла.Каталог = """";
	ДиалогОткрытияФайла.ПолноеИмяФайла = """";
	
	Если ДиалогОткрытияФайла.Выбрать() Тогда
		ЭтаФорма.КаталогСохранения = ДиалогОткрытияФайла.Каталог;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы	

Процедура ПриОткрытии()
	
	ЭтаФорма.Заголовок = ЗаменяемыйКод_ауф.ПредставлениеОбъекта(ЭтотОбъект);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

Процедура ВыбПериодНажатие(Элемент)

	РаботаСДиалогами.ОбработчикНастройкаПериодаНажатие(НачПериода, КонПериода);
	
КонецПроцедуры


#КонецОбласти




#Область СлужебныеПроцедурыИФункции	

Процедура СформироватьОтчет()
	
	ОтметитьВеху(""Запрос БД"");
	ПолеРазбивка = """"; // использовать для разделения итогового результата по разным файлам
	СводнаяТаблица = СводнаяТаблицаРезультат(ПолеРазбивка);
	ВывестиРезультатНаФорму(СводнаяТаблица);
	
	ОтметитьВеху(""Компоновка результата. Записей в файл:"" + СводнаяТаблица.Количество());
	
	ПолноеИмяФайла = ИмяФайлаРезультата();
	
	СформироватьИЗаписатьФайл(СводнаяТаблица, ПолноеИмяФайла);
	
	ОтметитьВеху(""Отчет сформирован. Файлы записаны."");

КонецПроцедуры

Функция СводнаяТаблицаРезультат(пИндексы = """")
	
	Отбор = Новый Структура;
	Отбор.Вставить(""Дата1"", НачПериода);
	Отбор.Вставить(""Дата2"", КонецДня(КонПериода));
	Результат = РезультатОтчета(Отбор,, ""ТаблицаЗначений"");
	
	Если ЗначениеЗаполнено(пИндексы) Тогда
		Результат.Индексы.Добавить(пИндексы);
	КонецЕсли;
	
	Возврат Результат;

КонецФункции

Функция СформироватьИЗаписатьФайл(пТаблица, пИмяФайла)
	
	//Фильтры = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
	//Фильтры.Добавить(""ИмяПоляТаблицыПоКоторомуОтбор"", ""НеРавно"", ЗначениеОтбора);
	//ПараметрыКомпоновщика = Фильтры.ПолучитьАУФ();
	
	Макеты = Новый Структура;
	//Макеты.Вставить(""МакетОформления"", ПолучитьМакетОформления(СтандартноеОформление.Интерфейс));
	//Макеты.Вставить(""МакетЗаголовкаОтчета"", ПолучитьМакет(""ЗаголовокОтчета""));
	//Макеты.Вставить(""МакетШапкиТаблицы"", ПолучитьМакет(""ШапкаТаблицы""));
	//Макеты.Вставить(""МакетДетальныхЗаписей"", ПолучитьМакет(""СтрокаТаблицы""));
	//Макеты.Вставить(""МакетПодвалаТаблицы"", ПолучитьМакет(""ПодвалТаблицы""));
	//Макеты.Вставить(""МакетОбщихИтогов"", ПолучитьМакет(""ОбщиеИтоги""));
	//Макеты.Вставить(""МакетПодвалаОтчета"", ПолучитьМакет(""ПодвалОтчета""));
	
	ФорматДаты = ""ДФ=dd.MM.yyyy"";
	ПредставлениеПериодаОтчета = Формат(НачПериода, ФорматДаты) + "" - "" + Формат(КонПериода, ФорматДаты); 
	ПараметрыМакетов = Новый Структура(""ПериодОтчета"", ПредставлениеПериодаОтчета);
	
	ПараметрыЗаписи = Новый Структура;
	ПараметрыЗаписи.Вставить(""ИмяФайла"", пИмяФайла);
	ПараметрыЗаписи.Вставить(""Отбор"", ПараметрыКомпоновщика.Отбор);
	ПараметрыЗаписи.Вставить(""УсловияОтбора"", ПараметрыКомпоновщика.УсловияОтбора);
	ПараметрыЗаписи.Вставить(""Макеты"", Макеты);
	ПараметрыЗаписи.Вставить(""ПараметрыМакетов"", ПараметрыМакетов);
	
	ОбщегоНазначения_ауф.ТаблицаЗначенийВФайл(пТаблица, ПараметрыЗаписи); 
	
КонецФункции

Процедура ВывестиРезультатНаФорму(пТаблица)
	
	ТабРезультат = пТаблица;
	ЭлементыФормы.ТабРезультат.СоздатьКолонки();

КонецПроцедуры

Функция ИмяФайлаРезультата()
	
	ИмяФайла = ЭтаФорма.Заголовок + ""_"" + Формат(КонПериода,""ДФ=yyyy"");
	ИмяФайла = ОбщегоНазначения_ауф.ЗаменитьНедопустимыеСимволыВИмениФайла(ИмяФайла);
	Результат = КаталогСохранения + ""\"" + ИмяФайла + "".""<?""Расширение файла"", ВыборВарианта, ""MS Excel 2007+"", ""xlsx"", ""MS Word 2007+"", ""docx"", ""HTML"", ""html"", ""MXL"", ""mxl"", ""OpenOffice table"", ""ods"", ""PDF"", ""pdf"", ""MS Excel 97"", ""xls"">"""";
	
	Возврат Результат;

КонецФункции

Процедура ОтметитьВеху(пСобытие)
	
	Сообщать = Истина;
	ВывестиВремя = Истина;
	
	ИнтерактивнаяРабота_ауф.ВывестиСостояние(ЭтаФорма.Заголовок + ""."" + пСобытие, Сообщать, ВывестиВремя);

КонецПроцедуры




#КонецОбласти"}
},
{0,
{"Новый общий запрос. Общий модуль.",0,0,"Новый[ОбщийЗапрос]","	ИначеЕсли пИмяЗапроса = ИменаОбщихЗапросов_ауф.<?""Имя запроса"">() Тогда
		Результат = НастройкиЗапроса_<?""Имя запроса"">();



Функция НастройкиЗапроса_<?""Имя запроса"">()
	
	Параметры = Новый Структура;
	
	ТекстЗапроса = 
	""""
	;
	
	Результат = Новый Структура;
	Результат.Вставить(""Константы"", Параметры);
	Результат.Вставить(""ТекстЗапроса"", ТекстЗапроса);
	
	Возврат Результат;
	
КонецФункции"}
},
{0,
{"ВерсииПодсистем.Рабочий модуль подсистемы",0,0,"Версии[ПодсистемРабочий]","
#Область СлужебныйПрограммныйИнтерфейс

#Область ИнтерфейсАУФ

Функция ВерсияОбъекта() Экспорт
	
	Возврат ""0.001"";
	
КонецФункции

Функция ИдентификаторОбъекта() Экспорт
	
	Возврат Метаданные.ОбщиеМодули.<?""Выберите рабочий модуль подсистемы"", ОбъектМетаданных, ""ОбщийМодуль"">.ПолноеИмя();
	
КонецФункции

#Область ВерсииПодсистем_АУФ

Функция ВерсияПодсистемыАктивная() Экспорт
	
	Настройки = <?""Выберите модуль подсистемы с методом """"Настройки()"""""", ОбъектМетаданных, ""ОбщийМодуль"">.Настройки();
	
	Возврат Настройки.Версия;
	
КонецФункции

Функция ВерсияПодсистемы() Экспорт
	
	Возврат ""1.000"";
	
	// История версий
	
КонецФункции

Функция ВсеВерсииПодсистемы() Экспорт
	
	Возврат 
	""0,""
	+""1.000""
	;
	
КонецФункции

Функция МакетОписанияИзменений() Экспорт
	
	Возврат Неопределено;
	
КонецФункции

#КонецОбласти


Процедура ОбновитьВерсиюНастроек() Экспорт
	
	Дата = ТекущаяДатаСеанса();
	АктуальнаяВерсия = ОбщегоНазначения_ауф.ВерсияЧислом(ВерсияПодсистемы());
	
	ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
	#Область DevOnlyПолучениеКонтекста
	#Если Сервер и Не Сервер Тогда
		
		ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
		
	#КонецЕсли
	#КонецОбласти
	ПараметрыЗапроса.ДобавитьОтбор(""Версия"", ""="", АктуальнаяВерсия);
	ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
	
	МетаРег = Метаданные.РегистрыСведений.УчетДоговоровНастройки;
	РезультатЗапроса = ПроксиЗапросы_ауф.СрезРС(МетаРег, Дата, ПараметрыЗапросаАУФ);
	Настройки = ОбщегоНазначения_ауф.РезультатЗапросаВСтруктуру(РезультатЗапроса);
	
	Если РезультатЗапроса.Пустой() Тогда
		СформироватьНастройкиПодсистемы(Настройки);
	КонецЕсли;
	
	ЗаписатьНастройкиПодсистемы(Настройки, Дата);
	
КонецПроцедуры

Процедура СформироватьНастройкиПодсистемы(пКонтейнер) Экспорт
	
	МетаРег = Метаданные.РегистрыСведений.<?""Выберите регистр сведений, хранящий настройки подсистемы (необязательно)"", ОбъектМетаданных, ""РегистрСведений"">;
	
	Имя = МетаРег.Ресурсы.Версия.Имя;
	пКонтейнер[Имя] = ОбщегоНазначения_ауф.ВерсияЧислом(ВерсияПодсистемы());  
	

КонецПроцедуры

Функция ЗаписатьНастройкиПодсистемы(пЗначения, пДата)Экспорт
	
	Запись = РегистрыСведений.<?""Выберите регистр сведений, хранящий настройки подсистемы (необязательно)"", ОбъектМетаданных, ""РегистрСведений"">.СоздатьМенеджерЗаписи();
	ЗаполнитьЗначенияСвойств(Запись, пЗначения);
	Запись.Период = пДата;
	
	Запись.Записать();	
	
КонецФункции

#КонецОбласти

#КонецОбласти
"}
}
},
{7,
{"Конструкторы",1,0,"",""},
{0,
{"Новый документ с заполнением",0,0,"Новый[Документ]","<?""Имя новой переменной""> = Объекты_ауф.НовыйДокумент(Документы.<?"""", Документ>, <?""Имя переменной данных заполнения"">, <?"""", ВыборВарианта, ""Не копирование"", ""Ложь"", ""Это копирование"", ""Истина"">, , <?""Имя переменной с описание контекста"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.ДокументОбъект_ауф.Создать();
	
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Новый справочник с заполнением",0,0,"Новый[Справочник]","<?""Имя новой переменной""> = Объекты_ауф.НовыйСправочник(Справочники.<?"""", Справочник>, <?""Имя переменной данных заполнения"">, <?""Это группа?"", ВыборВарианта, ""Элемент"", ""Ложь"", ""Группа"", ""Истина"">, <?"""", ВыборВарианта, ""Не копирование"", ""Ложь"", ""Это копирование"", ""Истина"">, , <?""Имя переменной с описание контекста"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.СправочникОбъект_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>"}
},
{0,
{"Документ-объект по ссылке",0,0,"Получить[ДокОбъект]","<?""Имя новой переменной""> = Объекты_ауф.ДокументОбъект(<?""Имя переменной со ссылкой"">, <?""Имя переменной с описание контекста"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.ДокументОбъект_ауф.Создать();
	
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Справочник-объект по ссылке",0,0,"Получить[СпрОбъект]","<?""Имя новой переменной""> = Объекты_ауф.СправочникОбъект(<?""Имя переменной со ссылкой"">, <?""Имя переменной с описание контекста"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.СправочникОбъект_ауф.Создать();
	
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Параметры запроса",0,0,"Параметры[Запроса]","<?""Имя новой переменной""> = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"МастерПодбораРесурсов",0,0,"Мастер[ПР]","<?""Имя новой переменной""> = МастерскаяАПИ_ауф.МастерПодбораРесурсов(Неопределено, <?""Поведение при нехватке остатков"", ВыборВарианта, ""Выдать исключение"", ""Истина"", ""Продолжить выполнение"", ""Ложь"">, <?""Поведение при нехватке остатка по текущей позиции"", ВыборВарианта, ""Продолжить подбор"", ""Ложь"", ""Остановить подбор"", ""Истина"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	<?""Имя новой переменной""> = Обработки.ПодборРесурсов_ауф.Создать();
	
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Добавить отбор АУФ (метод)",0,0,"Добавить[ОтборАУФ]","ДобавитьОтбор(""<?""Имя поля"">"", <?""Вид сравнения"", ВыборВарианта, ""Равно"", ""\""Равно\"""", ""НеРавно"", ""\""НеРавно\"""", ""ВСписке"", ""\""ВСписке\"""", ""ВСпискеПоИерархии"", ""\""ВСпискеПоИерархии\"""", ""ВИерархии"", ""\""ВИерархии\"""", ""Больше"", ""\""Больше\"""", ""БольшеИлиРавно"", ""\""БольшеИлиРавно\"""", ""Меньше"", ""\""МеньшеИлиРавно\"""", ""Интервал"", ""\""Интервал\"""", ""ИнтервалВключаяГраницы"", ""\""ИнтервалВключаяГраницы\"""", ""ИнтервалВключаяНачало"", ""\""ИнтервалВключаяНачало\"""", ""ИнтервалВключаяОкончание"", ""\""ИнтервалВключаяОкончание\"""", ""Содержит"", ""\""Содержит\"""", ""НеСодержит"", ""\""НеСодержит\"""">, <?""Значение1 отбора или имя переменной""><?>);"}
}
},
{7,
{"Комментирование участков модуля",1,0,"",""},
{8,
{"Процедуры и функции",1,0,"",""},
{0,
{"Процедура @",0,0,"Проц[едура]","//
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
Процедура <?""Имя процедуры"">()
	
	<?>
	
КонецПроцедуры //) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя>"}
},
{0,
{"Процедура (с параметрами) @",0,0,"Проц[едура]","//
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
Процедура <?""Имя процедуры"">(<?""Параметры"">)
	
	<?>
	
КонецПроцедуры // ) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда"">"}
},
{0,
{"Процедура (полная) @",0,0,"Проц[едура]","// ЗдесьДолжноБытьКраткоеОписаниеПроцедуры
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
//
// Параметры
//  нет передаваемых параметров
//  Параметр1 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  Параметр2 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//
<?""Выберите директиву компиляции"", ВыборВарианта, ""без директивы"", ""//"", ""НаКлиенте"", ""&НаКлиенте"", ""НаСервере"", ""&НаСервере"", ""НаКлиентеНаСервере (для модуля команды)"", ""&НаКлиентеНаСервере"", ""НаСервереБезКонтекста (для модуля формы)"", ""&НаСервереБезКонтекста"", ""НаКлиентеНаСервереБезКонтекста (для модуля формы)"", ""&НаКлиентеНаСервереБезКонтекста"">
Процедура <?""Имя процедуры"">(<?""Параметры"">)<?""Экспортная процедура"", ВыборВарианта, ""Экспортная"", "" Экспорт"", ""Не экспортная"", """">
	
	<?>
	
КонецПроцедуры // ) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда"">"}
},
{0,
{"Функция @",0,0,"Функ[ция]","//
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
Функция <?""Имя функции"">()
	
	<?>
	
	Возврат Неопределено;
	
КонецФункции // ) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда"">"}
},
{0,
{"Функция (с параметрами) @",0,0,"Функ[ция]","//
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
Функция <?""Имя процедуры"">(<?""Параметры"">)
	
	<?>
	
	Возврат Неопределено;
	
КонецФункции // ) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда"">"}
},
{0,
{"Функция (полная) @",0,0,"Функ[ция]","// ЗдесьДолжноБытьКраткоеОписаниеФункции
// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда""> (
//
// Параметры
//  нет передаваемых параметров
//  Параметр1 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  Параметр2 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//
<?""Выберите директиву компиляции"", ВыборВарианта, ""без директивы"", ""//"", ""НаКлиенте"", ""&НаКлиенте"", ""НаСервере"", ""&НаСервере"", ""НаКлиентеНаСервере (для модуля команды)"", ""&НаКлиентеНаСервере"", ""НаСервереБезКонтекста (для модуля формы)"", ""&НаСервереБезКонтекста"", ""НаКлиентеНаСервереБезКонтекста (для модуля формы)"", ""&НаКлиентеНаСервереБезКонтекста"">
Функция <?""Имя процедуры"">(<?""Параметры"">)<?""Экспортная процедура"", ВыборВарианта, ""Экспортная"", "" Экспорт"", ""Не экспортная"", """">
	
	<?>
	
	Возврат Неопределено;
	
КонецФункции // ) <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Тип задачи"", ВыборВарианта, ""Наряд"", ""наряд"", ""Задача портала"", ""задача портала"", ""Изменение"", ""изменение"", ""Инцидент"", ""инцидент""> <?""Номер наряда"">"}
},
{0,
{"Комментарий (заголовок процедуры) @",0,0,"Коммент[арий]","// ЗдесьДолжноБытьКраткоеОписаниеПроцедуры
//
// Параметры
//  нет передаваемых параметров
//  Параметр1 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  Параметр2 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  	* РеквизитПараметра - Тип.Вид - описание реквизита параметра. Вложенность реквизитов определоыяется числом символа *
//
"}
},
{0,
{"Комментарий (заголовок функции) @",0,0,"Коммент[арий]","// ЗдесьДолжноБытьКраткоеОписаниеФункции
//
// Параметры
//  нет передаваемых параметров
//  Параметр1 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  Параметр2 - Тип.Вид - описание параметра
//                 продолжение описания параметра
//  	* РеквизитПараметра - Тип.Вид - описание реквизита параметра. Вложенность реквизитов определоыяется числом символа *
//
// Возвращаемое значение:
//   Тип.Вид - описание возвращаемого значения
//"}
}
},
{8,
{"Технический долг",1,0,"",""},
{0,
{"Ошибка",0,0,"туду[Ошибка]","// FIXME: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?>"}
},
{0,
{"Ошибка. Запрос в цикле",0,0,"туду[ОшибкаЗапрос]","// FIXME: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> Запрос в цикле<?>"}
},
{0,
{"Ошибка. Не обрабатывается исключение",0,0,"туду[ОшибкаИсключение]","// FIXME: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> Не обрабатывается или неверно обрабатывается исключение<?>"}
},
{0,
{"Тех.долг (тех.долг)",0,0,"туду","// TODO: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?>"}
},
{0,
{"Тех.долг (тех.долг) Китайский код",0,0,"туду[Китай]","// TODO: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> Китайский код<?>"}
},
{0,
{"Техдолг [копирование кода]",0,0,"Копи[паста]","// CopyPaste: <?"""", ДатаВремя, ""ДЛФ=Д""> <?""ИмяПользователяСокр"", ИмяПользователя> Источник: <?""Откуда скопирован код?""> (

<?>

// ) CopyPaste: <?"""", ДатаВремя, ""ДЛФ=Д""> <?""ИмяПользователяСокр"", ИмяПользователя> <?""Откуда скопирован код?"">) "}
},
{0,
{"Замечание",0,0,"туду","// XXX: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя>: <?>"}
},
{0,
{"Замечание. Неинформативное наименование",0,0,"туду[з]","// XXX: <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя>: Несоответствие наименования и семантики кода"}
}
},
{11,
{"СтруктураМодуля",1,0,"",""},
{0,
{"Область",0,0,"Область","#Область <?""Имя области"">

<?>
	
#КонецОбласти"}
},
{0,
{"Область ОписаниеПеременных",0,0,"Область[ОписаниеПеременных]","#Область ОписаниеПеременных

#КонецОбласти"}
},
{0,
{"Область ПрограммныйИнтерфейс",0,0,"Область[ПрограммныйИнтерфейс]","#Область ПрограммныйИнтерфейс

#КонецОбласти"}
},
{0,
{"Область ОбработчикиСобытий",0,0,"Область[ОбработчикиСобытий]","#Область ОбработчикиСобытий

#КонецОбласти"}
},
{0,
{"Область СлужебныйПрограммныйИнтерфейс",0,0,"Область[СлужебныйПрограммныйИнтерфейс]","#Область СлужебныйПрограммныйИнтерфейс

#КонецОбласти"}
},
{0,
{"Область Инициализация",0,0,"Область[Инициализация]","#Область Инициализация

#КонецОбласти"}
},
{0,
{"Область ОбработчикиСобытийФормы",0,0,"Область[ФормаСобытия]","#Область ОбработчикиСобытийФормы

<?>
	
#КонецОбласти"}
},
{0,
{"Область ОбработчикиСобытийЭлементовШапкиФормы",0,0,"Область[ФормаСобытияШапки]","#Область ОбработчикиСобытийЭлементовШапкиФормы

<?>
	
#КонецОбласти"}
},
{0,
{"Область ОбработчикиСобытийЭлементовТаблицыФормы",0,0,"Область[ФормаСобытияТаблицы]","#Область ОбработчикиСобытийЭлементовТаблицыФормы<?""Имя таблицы"">

<?>
	
#КонецОбласти"}
},
{0,
{"Область ОбработчикиКомандФормы",0,0,"Область[ФормаКоманды]","#Область ОбработчикиКомандФормы

<?>
	
#КонецОбласти"}
},
{0,
{"Область СлужебныеПроцедурыИФункции",0,0,"Область[ФормаСлужебныеФункции]","#Область СлужебныеПроцедурыИФункции

<?>
	
#КонецОбласти"}
}
},
{0,
{"Получение контекста",0,0,"Конт[екст]","#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?>
#КонецЕсли
#КонецОбласти"}
},
{0,
{"Общий модуль",0,0,"Общий[Модуль]","// TODO COMMON. <?"""", ДатаВремя, ""ДЛФ=Д""> <?""ИмяПользователяСокр"", ИмяПользователя> Возможно, стоит вынести в общий модуль."}
},
{0,
{"Правка в коде",0,0,"Правка[Код]","// <?"""", ДатаВремя, ""ДФ=yyyy.MM.dd""> <?""ИмяПользователяСокр"", ИмяПользователя> <?>"}
},
{0,
{"Заглушка на период разработки и тестирования",0,0,"Заглушка","// Stub. <?"""", ДатаВремя, ""ДЛФ=Д""> <?""ИмяПользователяСокр"", ИмяПользователя> "}
}
},
{1,
{"ПовторноеИспользование",1,0,"",""},
{11,
{"Запросы",1,0,"",""},
{0,
{"Найти документ",0,0,"Найти[Документ]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
<?""Имя переменной результата""> = Объекты_ауф.ДокументНайти(Документы.<?""Выберите тип объекта"", Документ>, ПараметрыЗапросаАУФ);"}
},
{0,
{"Найти справочник",0,0,"Найти[Справочник]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
<?""Имя переменной результата""> = Объекты_ауф.СправочникНайти(Справочники.<?""Выберите тип объекта"", Справочник>, ПараметрыЗапросаАУФ);"}
},
{0,
{"Найти ПВХ",0,0,"Найти[ПВХ]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
<?""Имя переменной результата""> = Объекты_ауф.ПВХНайти(ПланыВидовХарактеристик.<?""Выберите тип объекта"", ПланВидовХарактеристик>, ПараметрыЗапросаАУФ);"}
},
{0,
{"Запрос документов",0,0,"Запрос[Документов]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
РезультатЗапроса = Объекты_ауф.ДокументЗапросДанных(Документы.<?""Выберите тип объекта"", Документ>, ПараметрыЗапросаАУФ);"}
},
{0,
{"Запрос справочников",0,0,"Запрос[Справочников]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
РезультатЗапроса = Объекты_ауф.СправочникЗапросДанных(Справочники.<?""Выберите тип объекта"", Справочник>, ПараметрыЗапросаАУФ);"}
},
{0,
{"Запрос ПВХ",0,0,"Запрос[ПВХ]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);

ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
РезультатЗапроса = Объекты_ауф.ПВХЗапросДанных(ПланыВидовХарактеристик.<?""Выберите тип объекта"", ПланВидовХарактеристик>, ПараметрыЗапросаАУФ); "}
},
{0,
{"Запрос данных (физ. таблица)",0,0,"Запрос[ФизическаяТаблица]","// работает для любых физических таблиц, но методы для документов, справочников, ПФХ постепенно мигрируют в отдельные классы.
// Если необходим запрос к виртуальным таблицам, то есть специальные методы того же модуля для виртуальных таблиц.
ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Номенклатура"", ""ВСписке"", СписокЗначений); //Пример фильтра
ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
МетаОбъект = Метаданные.<?"""", ВыборВарианта, ""Справочники"", ""Справочники"", ""Документы"", ""Документы"", ""ПланыВидовХарактеристик"", ""ПланыВидовХарактеристик"", ""РегистрыНакопления"", ""РегистрыНакопления"", ""РегистрыСведений"", ""РегистрыСведений"", ""РегистрыБухгалтерии"", ""РегистрыБухгалтерии"", ""РегистрыРасчета"", ""РегистрыРасчета"", ""Константы"", ""Константы"", ""ПланыОбмена"", ""ПланыОбмена"", ""ПланыСчетов"", ""ПланыСчетов"", ""БизнесПроцессы"", ""БизнесПроцессы"", ""Задачи"", ""Задачи"">.<?""Выберите объект"", ОбъектМетаданных, ""Справочник"", ""Документ"", ""ПланВидовХарактеристик"", ""РегистрНакопления"", ""РегистрСведений"", ""РегистрБухгалтерии"", ""РегистрРасчета"", ""Константа"", ""ПланОбмена"", ""ПланСчетов"", ""БизнесПроцесс"", ""Задача"">;
ТипКонтейнера = """"; // Необязательно. Допустимые значения: РезультатЗапроса,ТаблицаЗначений,ДеревоЗначений,Массив,СписокЗначений

РезультатЗапроса = ПроксиЗапросы_ауф.ЗапросДанных(МетаОбъект, ПараметрыЗапросаАУФ, ТипКонтейнера);


"}
},
{0,
{"Запрос остатков РН",0,0,"Запрос[ОстаткиРН]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
ДатаОстатков = Неопределено; //Если не задано, то будут взяты последние остатки
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Номенклатура"", ""ВСписке"", СписокЗначений); //Пример фильтра
ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
МетаРег = Метаданные.РегистрыНакопления.<?""Регистр остатков"", РегистрНакопления>;

РезультатЗапроса = ПроксиЗапросы_ауф.ОстаткиРН(МетаРег, ДатаОстатков, ПараметрыЗапросаАУФ);"}
},
{0,
{"Запрос среза РС",0,0,"Запрос[СрезРС]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
ДатаСреза = Неопределено; //Если не задано, то будут взяты последние остатки
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Номенклатура"", ""ВСписке"", СписокЗначений); //Пример фильтра
ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
МетаРег = Метаданные.РегистрыСведений.<?""Выберите регистр"", РегистрСведений>;
ЭтоСрезПоследних = <?""Вид среза"", ВыборВарианта, ""Срез последних"", ""Истина"", ""Срез первых"", ""Ложь"">;

РезультатЗапроса = ПроксиЗапросы_ауф.СрезРС(МетаРег, ДатаСреза, ПараметрыЗапросаАУФ, ЭтоСрезПоследних);"}
},
{0,
{"Запрос оборотов РН",0,0,"Запрос[ОборотыРН]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.АПИ_ДокументОбъект.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
НачалоПериода = Неопределено; //Если не задано, то обороты будут взяты с самой первой записи
КонецПериода = Неопределено; //Если не задано, то будут обороты будут взяты вплоть до последней записи
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.Добавить(""Номенклатура"", ""ВСписке"", СписокЗначений); //Пример фильтра
ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
МетаРег = Метаданные.РегистрыНакопления.<?""Регистр остатков"", РегистрНакопления>;

РезультатЗапроса = ПроксиЗапросы_ауф.ОборотыРН(МетаРег, НачалоПериода, КонецПериода, ПараметрыЗапросаАУФ);"}
},
{0,
{"Произвольный запрос",0,0,"Запрос[Произвольный]","ПараметрыЗапроса = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	
	ПараметрыЗапроса = Обработки.КонструкторПараметровЗапроса_ауф.Создать();
	
#КонецЕсли
#КонецОбласти

<?>
// Ваши отборы и другие параметры запроса могут быть здесь. 
// Для отборов поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
//ПараметрыЗапроса.ДобавитьОтбор(""Дата"", "">="", НачалоДня(ТекущаяДата()));
//ПараметрыЗапроса.ДобавитьОтбор(""Проведен"", ""Равно"", Истина);


ПараметрыЗапросаАУФ = ПараметрыЗапроса.ПолучитьАУФ();
ТекстЗапроса = ТекстЗапроса<?""Имя запроса"">();

Запрос = Запросы_ауф.НовыйЗапрос(ТекстЗапроса, ПараметрыЗапросаАУФ, Истина);

Функция ТекстЗапроса<?""Имя запроса"">()
	
	// При разработке запроса не забываем настраивать параметры построителя:
	// таблицы, поля и условия, в т.ч. условия виртуальных таблиц
	// Для даты остатков используйте параметр &ДатаОстатков
	
	Возврат
	""""
	;
	
КонецФункции"}
}
}
},
{7,
{"ЗаменяемыйКод",1,0,"",""},
{0,
{"Служебный программный интерфейс",0,0,"Заменить[СПИ]","#Область СлужебныйПрограммныйИнтерфейс

Функция ВерсияОбъекта() Экспорт
	
	Возврат ""0.001"";
	
КонецФункции

Функция ИдентификаторОбъекта() Экспорт
	
	Возврат Метаданные.ИМЯ_КОЛЛЕКЦИИ.ИМЯ_ОБЪЕКТА.ПолноеИмя();
	
КонецФункции

#КонецОбласти


#Область ЗаменяемыйКод_Обработки_СобытияФормы

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	ЗаменяемыйКод_ауф.ПодменитьФормуОбработки(ЭтотОбъект, Отказ);
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	ЭтаФорма.Заголовок = ЗаменяемыйКод_ауф.ПредставлениеОбъекта(ЭтотОбъект);
	
КонецПроцедуры




#КонецОбласти"}
},
{0,
{"Получить обработку",0,0,"Получить[Обработку]","<?""Имя переменной""> = ЗаменяемыйКод_ауф.ПолучитьОтчетОбработку(Обработки.<?""Выберите обработку"", ОбъектМетаданных, ""Обработка"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""Имя переменной""> = Обработки.<?""Выберите обработку"", ОбъектМетаданных, ""Обработка"">.Создать(); 
#КонецЕсли
#КонецОбласти
<?>
"}
},
{0,
{"Получить отчет",0,0,"Получить[Отчет]","<?""Имя переменной""> = ЗаменяемыйКод_ауф.ПолучитьОтчетОбработку(Отчеты.<?""Выберите отчет"", ОбъектМетаданных, ""Отчет"">);
#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""Имя переменной""> = Отчеты.<?""Выберите отчет"", ОбъектМетаданных, ""Отчет"">.Создать(); 
#КонецЕсли
#КонецОбласти
<?>
"}
},
{0,
{"Получить общий модуль",0,0,"Получить[ОбщийМодуль]","ШифрМодуля = Метаданные.ОбщиеМодули.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""ОбщийМодуль"">.ПолноеИмя();
<?""ИмяПеременной""> = ЗаменяемыйКод_ауф.ОбъектНаВыполнение(ШифрМодуля, <?""Выберите заменяемый объект"", ОбъектМетаданных, ""ОбщийМодуль"">);

#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""ИмяПеременной""> = <?""Выберите заменяемый объект"", ОбъектМетаданных, ""ОбщийМодуль"">; 
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Получить модуль менеджера справочника",0,0,"Получить[МодульМенеджераСправочника]","ШифрМодуля = Метаданные.Справочники.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Справочник"">.ПолноеИмя();
<?""ИмяПеременной""> = ЗаменяемыйКод_ауф.ОбъектНаВыполнение(ШифрМодуля, Справочники.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Справочник"">);

#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""ИмяПеременной""> = Справочники.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Справочник"">; 
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Получить модуль менеджера документа",0,0,"Получить[МодульМенеджераДокумента]","ШифрМодуля = Метаданные.Документы.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Документ"">.ПолноеИмя();
<?""ИмяПеременной""> = ЗаменяемыйКод_ауф.ОбъектНаВыполнение(ШифрМодуля, Документы.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Документ"">);

#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""ИмяПеременной""> = Документы.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""Документ"">; 
#КонецЕсли
#КонецОбласти
<?>"}
},
{0,
{"Получить модуль менеджера регистра сведений",0,0,"Получить[МодульМенеджераРС]","ШифрМодуля = Метаданные.РегистрыСведений.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""РегистрСведений"">.ПолноеИмя();
<?""ИмяПеременной""> = ЗаменяемыйКод_ауф.ОбъектНаВыполнение(ШифрМодуля, РегистрыСведений.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""РегистрСведений"">);

#Область DevOnlyПолучениеКонтекста
#Если Сервер и Не Сервер Тогда
	<?""ИмяПеременной""> = РегистрыСведений.<?""Выберите заменяемый объект"", ОбъектМетаданных, ""РегистрСведений"">; 
#КонецЕсли
#КонецОбласти
<?>"}
}
},
{7,
{"СтандартныеОперации",1,0,"",""},
{0,
{"Безопасная запись",0,0,"Записать[Безопасно]","	ОписаниеКонтекста = СобытияЖР_ауф.СформироватьОписаниеСобытия();
	ПараметрыЗаписи = ОбщегоНазначения_ауф.ПараметрыБезопаснойЗаписи(ОписаниеКонтекста);
	Если Не ОбщегоНазначения_ауф.ЗаписатьБезопасноСРегистрацией(ДокОбъект, ПараметрыЗаписи) Тогда
		<?>
	КонецЕсли;
"}
},
{0,
{"Безопасная запись (пример кода)",0,0,"Записать[Безопасно]","	ОбщийКонтекст = ""ФоновоеЗаданиеЗагрузкаДанныхССайта""; // Заполнять если важно отличать где именно произошла ошибка
	МестоОшибки = ""СозданиеКонтрагентовИзФайлаОбмена""; // Заполнять если слишком много событий в общем контексте. Описание конкретного места возникновения ошибки имя функции или краткое описание фрагмента кода
	// ВАЖНО! Контекст не должен быть уникальным. Из этих параметров формируется дерево событий в журнале регистрации
	ОписаниеКонтекста = СобытияЖР_ауф.СформироватьОписаниеСобытия(ОбщийКонтекст, МестоОшибки);
	ПараметрыЗаписи = ОбщегоНазначения_ауф.ПараметрыБезопаснойЗаписи(ОписаниеКонтекста);
	Если Не ОбщегоНазначения_ауф.ЗаписатьБезопасноСРегистрацией(ДокОбъект, ПараметрыЗаписи) Тогда
		// если есть активная транзакция:
		// откатить транзакцию, если она начата в этом методе, или пробросить информацию о необходимости отката в вызывающий код
		// Если проброс невозможен, то необходимо бросать исключение (последний параметр функции ПараметрыБезопаснойЗаписи()
	КонецЕсли;"}
},
{0,
{"Записать произвольный объект",0,0,"Записать[Произвольный]","ИнфоОбОшибке = Неопределено;
Если Не ОбщегоНазначения_ауф.ЗаписатьОбъект(<?""Имя переменной объекта"">, ИнфоОбОшибке) Тогда
	<?> // обязательно обрабатывать исключение. Если это внутри транзакции, то предусмотреть передачу информации о необходимости отката, коду открывшему транзакцию 
КонецЕсли;"}
},
{0,
{"Записать произвольный объект (пример кода)",0,0,"Записать[Произвольный]","ИнфоОбОшибке = Неопределено;
Если Не ОбщегоНазначения_ауф.ЗаписатьОбъект(<?""Имя переменной объекта"">, ИнфоОбОшибке) Тогда
	<?>// обязательно обрабатывать исключение. Если это внутри транзакции, то предусмотреть передачу информации о необходимости отката, коду открывшему транзакцию
	////Сделать что-то. Желательно указывать контекст для облегчения поиска в журнале.
	//// ВАЖНО! Контекст не должен быть уникальным. Из этих параметров формируется дерево событий в журнале регистрации
	//// Например:
	// ОбщийКонтекст = ""ФоновоеЗаданиеЗагрузкаДанныхССайта""; // Заполнять если важно отличать где именно произошла ошибка
	// МестоОшибки = ""СозданиеКонтрагентовИзФайлаОбмена""; // Заполнять если слишком много событий в общем контексте. Описание конкретного места возникновения ошибки имя функции или краткое описание фрагмента кода
	// КонтекстОшибки = СобытияЖР_ауф.СформироватьОписаниеСобытия(ОбщийКонтекст, МестоОшибки);
	// ТекстСообщенияОбОшибке = ПодробноеПредставлениеОшибки(ИнфоОбОшибке);
	// ОбщегоНазначения_ауф.ЗарегистрироватьОшибку(ИнфоОбОшибке, КонтекстОшибки, <?""Имя переменной объекта"">);  	
	// Сообщить(ТекстСообщенияОбОшибке);
	// Если ТранзакцияАктивна() Тогда
	//// Вызвать исключение или пробросить далее информацию о необходимости отката транзакции
	//	ВызватьИсключение ТекстСообщенияОбОшибке;
	// КонецЕсли;	
КонецЕсли;"}
},
{0,
{"Записать список произвольных объектов",0,0,"Записать[СписокПроизвольный]","СведенияОбОшибках = Новый Соответствие;
ЗаписыватьОднойТранзакцией = Ложь;
ПродолжатьПриОшибках = Истина;
Если Не ОбщегоНазначения_ауф.ЗаписатьСписокОбъектов(<?""Имя переменной списка объектов"">, СведенияОбОшибках, ЗаписыватьОднойТранзакцией, ПродолжатьПриОшибках) Тогда
	// обязательно обрабатывать исключение. Если вызов функции ОбщегоНазначения_ауф.ЗаписатьСписокОбъектов() происходит внутри транзакции, то предусмотреть передачу коду открывшему транзакцию информацию о необходимости отката
	// Сделать что-то. Желательно указывать контекст для облегчения поиска в журнале.
	// ВАЖНО! Контекст не должен быть уникальным. Из этих параметров формируется дерево событий в журнале регистрации
	// Например:
	ТекстыОшибок = Новый Массив;
	ОбщийКонтекст = ""ФоновоеЗаданиеЗагрузкаДанныхССайта""; // Заполнять если важно отличать где именно произошла ошибка
	МестоОшибки = ""СозданиеКонтрагентовИзФайлаОбмена""; // Заполнять если слишком много событий в общем контексте. Описание конкретного места возникновения ошибки имя функции или краткое описание фрагмента кода
	КонтекстОшибки = СобытияЖР_ауф.СформироватьОписаниеСобытия(ОбщийКонтекст, МестоОшибки);
	Для Каждого ОписаниеОшибки Из СведенияОбОшибках Цикл
		ИнфоОбОшибке = ОписаниеОшибки.Значение;
		Объект = ОписаниеОшибки.Ключ;
		ОбщегоНазначения_ауф.ЗарегистрироватьОшибку(ИнфоОбОшибке, КонтекстОшибки, Объект);  	
		ТекстыОшибок.Добавить(ПодробноеПредставлениеОшибки(ИнфоОбОшибке));
	КонецЦикла;
	ТекстСообщенияОбОшибке = ""Ошибка при записи объектов."" + Символы.ПС
	+ ОбщегоНазначения_ауф.МассивВСтрокуСРазделителями(ТекстыОшибок);
	Сообщить(ТекстСообщенияОбОшибке);
	Если ТранзакцияАктивна() Тогда
		// Вызвать исключение или пробросить далее информацию о необходимости отката транзакции
		ВызватьИсключение ТекстСообщенияОбОшибке;
	КонецЕсли;
КонецЕсли;
"}
},
{0,
{"Записать таблицу значений в файл",0,0,"Записать[ТаблицуЗначенийВФайл]","	
	// Ваши отборы могут быть здесь. Поддерживаются операторы сравнения, перечисление ВидСравнения или его наименования. 
	Фильтры = МастерскаяАПИ_ауф.КонструкторПараметровЗапроса();
	//Фильтры.Добавить(""СуммаОборот"", ""Больше"", 0);
	//Фильтры.Добавить(Договор, ""Равно"", ДоговорСсылка, Неопределено); 
	ОтборыКомпоновщика = Фильтры.ПолучитьАУФ();
	
	// Макеты
	Макеты = Новый Структура;
	//Макеты.Вставить(""МакетОформления"", СтандартноеОформление.Интерфейс);
	//Макеты.Вставить(""МакетЗаголовкаОтчета"", ПолучитьМакет(""ЗаголовокОтчета""));
	//Макеты.Вставить(""МакетШапкиТаблицы"", ПолучитьМакет(""ШапкаТаблицы""));
	//Макеты.Вставить(""МакетДетальныхЗаписей"", ПолучитьМакет(""СтрокаТаблицы""));
	//Макеты.Вставить(""МакетПодвалаТаблицы"", ПолучитьМакет(""ПодвалТаблицы""));
	//Макеты.Вставить(""МакетОбщихИтогов"", ПолучитьМакет(""ОбщиеИтоги""));
	//Макеты.Вставить(""МакетПодвалаОтчета"", ПолучитьМакет(""ПодвалОтчета""));
	
	// Параметры макетов
	//ФорматДаты = ""ДФ=dd.MM.yyyy"";
	//ПредставлениеПериодаОтчета = Формат(НачПериода, ФорматДаты) + "" - "" + Формат(КонПериода, ФорматДаты); 
	ПараметрыМакетов = Новый Структура;
	//ПараметрыМакетов.Вставить(""ПериодОтчета"", ПредставлениеПериодаОтчета);
	
	// Компоновка параметров для записи файла
	ПараметрыЗаписи = Новый Структура;
	ПараметрыЗаписи.Вставить(""ИмяФайла"", ПолноеИмяФайла);
	ПараметрыЗаписи.Вставить(""Отбор"", ОтборыКомпоновщика.Отбор); //Структура, где ключ это имя поля, а значение отбор
	ПараметрыЗаписи.Вставить(""УсловияОтбора"", ОтборыКомпоновщика.УсловияОтбора);//Виды сравнения для отборов с видом сравнения отличным от ВидСравнения.равно
	ПараметрыЗаписи.Вставить(""Макеты"", Макеты);//Структура, где ключ имя предопределенного макета построителя, а значение табличный документ
	ПараметрыЗаписи.Вставить(""ПараметрыМакетов"", ПараметрыМакетов); //Параметры заполнения для макетов где это предусмотрено (вид заполнения Параметр или Шаблон)
	
	ФайлЗаписан = ОбщегоНазначения_ауф.ТаблицаЗначенийВФайл(пТаблица, ПараметрыЗаписи);"}
},
{0,
{"Обработка исключений. Регистрация + Переопределение текста исключения",0,0,"Исключение","ИнфоОбОшибке = ИнформацияОбОшибке();
ОбщийКонтекст = """"; // Необязательно. Общий контекст события. Например имя обработки или фонового задания
МестоОшибки = """"; // Описание конкретного места возникновения ошибки. Имя функции или краткое описание фрагмента кода
ОписаниеСобытия = СобытияЖР_ауф.СформироватьОписаниеСобытияСтрокой(ОбщийКонтекст, МестоОшибки);
ОбщегоНазначения_ауф.ЗарегистрироватьОшибку(ИнфоОбОшибке, ОписаниеСобытия);

ТекстСообщения = ОписаниеСобытия + Символы.ПС + ПодробноеПредставлениеОшибки(ИнфоОбОшибке);
ВызватьИсключение ТекстСообщения; // можно просто сообщать если бросать исключение нельзя по логике алгоритма
"}
}
},
{1,
{"Общие методы классов",1,0,"",""},
{0,
{"Записать объект АУФ",0,0,"Записать[АУФ]","Если Не <?""Имя переменной объекта АУФ"">.Записать() Тогда
	Контекст = """"; //см. описание параметра
	РегистрацияОшибок_ауф.ОшибкаПриЗаписи(<?""Имя переменной объекта АУФ"">, Контекст); // Регистрация в ЖР и сообщение пользователю опциональны и включены по дефолту
КонецЕсли;
<?>"}
}
},
{1,
{"ИнтерактивнаяРабота",1,0,"",""},
{0,
{"Положительный ответ на вопрос",0,0,"Вопрос[Положительный]","ТекстВопроса = ""ТекстВопроса"";
Кнопки = ""Продолжить,Прервать""; //Системные перечисления, список значений или строка с разделителями
КнопкаДа = ""Продолжить"";
ПользовательОтветилПоложительно = ИнтерактивнаяРабота_ауф.ПоложительныйОтветНаВопрос(ТекстВопроса, Кнопки, КнопкаДа);"}
}
}
}
}